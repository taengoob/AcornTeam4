<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mapper.order">

	<insert id="insertOrder" parameterType="java.util.HashMap">
		INSERT INTO ORDER_DETAIL
		(
			ORDER_ID
			,ORDER_PRODUCT_ID
			,ORDER_USER_ID
			,ORDER_SELLER_ID
			--,ORDER_STATUS
			,ORDER_REG_DATE
			,ORDER_UPDATE_DATE
			,ORDER_RECV_PHONE
			,ORDER_AMOUNT
			,ORDER_RECV_ADDRESS_NUMBER
			,ORDER_PAYMENT_PRICE
			,ORDER_RECV_ADDRESS_ROAD
			,ORDER_PROD_PRICE
			,ORDER_DELIVERY_PRICE
			,ORDER_RECV_NAME
		)
		VALUES
		(
			#{orderId}
			,#{orderProductId}
			,#{orderUserId}
			,#{orderSellerId}
			--,orderStatus
			,CURRENT_DATE
			,CURRENT_DATE
			,#{orderRecvPhone}
			,#{orderAmount}
			,#{orderRecvAddressNumber}
			,#{orderPaymentPrice}
			,#{orderRecvAddressRoad}
			,#{orderProdPrice}
			,#{orderDeliveryPrice}
			,#{orderRecvName}
		)
	</insert>
	
	<select id="selectOrderByUserId" resultType="com.dto.OrderDTO" parameterType="String">
		SELECT
			ORDER_ID                  AS orderId
			,ORDER_PRODUCT_ID          AS orderProductId
			,ORDER_USER_ID             AS orderUserId
			,ORDER_SELLER_ID           AS orderSellerId
			,ORDER_STATUS              AS orderStatus
			,ORDER_REG_DATE            AS orderRegDate
			,ORDER_UPDATE_DATE         AS orderUpdateDate
			,ORDER_RECV_PHONE          AS orderRecvPhone
			,ORDER_AMOUNT              AS orderAmount
			,ORDER_RECV_ADDRESS_NUMBER AS orderRecvAddressNumber
			,ORDER_PAYMENT_PRICE       AS orderPaymentPrice
			,ORDER_RECV_ADDRESS_ROAD   AS orderRecvAddressRoad
			,ORDER_PROD_PRICE          AS orderProdPrice
			,ORDER_DELIVERY_PRICE      AS orderDeliveryPrice
			,ORDER_RECV_NAME           AS orderRecvName
			,B.ORDER_STATUS_DESC		AS displayStatus
		FROM ORDER_DETAIL A
			,ORDER_STATUS_CODE B
		WHERE 1=1
			AND ORDER_USER_ID = #{uesrId}
			AND A.ORDER_STATUS = B.ORDER_STATUS_ID
		ORDER BY ORDER_ID
	</select>
	
</mapper>